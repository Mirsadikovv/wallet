#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–µ–∑ –ë–î
# –ü—Ä–æ—Å—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

echo "=========================================="
echo "–¢–µ—Å—Ç –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞"
echo "=========================================="
echo ""

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ —Å–µ—Ä–≤–µ—Ä —Å–æ–±—Ä–∞–Ω
if [ ! -f "./wallet_server" ]; then
    echo "‚ùå –§–∞–π–ª wallet_server –Ω–µ –Ω–∞–π–¥–µ–Ω"
    echo "–ó–∞–ø—É—Å—Ç–∏—Ç–µ: go build -o wallet_server main.go"
    exit 1
fi

echo "‚úÖ –ë–∏–Ω–∞—Ä–Ω–∏–∫ wallet_server –Ω–∞–π–¥–µ–Ω"
echo ""

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ .env
if [ ! -f ".env" ]; then
    echo "‚ö†Ô∏è  –§–∞–π–ª .env –Ω–µ –Ω–∞–π–¥–µ–Ω, —Å–æ–∑–¥–∞—ë–º –∏–∑ .env.example"
    cp .env.example .env
    echo "‚úÖ –°–æ–∑–¥–∞–Ω .env –∏–∑ .env.example"
    echo ""
fi

echo "üìã –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:"
echo "   HTTP_PORT=$(grep HTTP_PORT .env | cut -d'=' -f2)"
echo "   TON_NETWORK=$(grep TON_NETWORK .env | cut -d'=' -f2)"
echo ""

echo "üöÄ –î–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:"
echo "   ./wallet_server"
echo ""

echo "‚ö†Ô∏è  –í–ê–ñ–ù–û: –ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ:"
echo "   1. PostgreSQL –∑–∞–ø—É—â–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω"
echo "   2. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–Ω–∞: createdb wallet_db"
echo "   3. Redis –∑–∞–ø—É—â–µ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)"
echo ""

echo "üìù –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ API —á–µ—Ä–µ–∑:"
echo "   bash examples.sh"
echo ""
echo "=========================================="
